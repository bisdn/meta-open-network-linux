#@TYPE: Machine
#@NAME: accton-as7726-32x

#@DESCRIPTION: Machine configuration for accton-as7726-32x systems

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto-onl"
PREFERRED_VERSION_linux-yocto-onl ?= "5.15%"

KMACHINE_accton-as7726-32x = "x86_64-intel"
KERNEL_FEATURES += "bsp/x86_64-intel"

DEFAULTTUNE ?= "corei7-64"

require conf/machine/include/tune-corei7.inc
require conf/machine/include/x86-base.inc
require conf/machine/include/onl.inc

MACHINE_FEATURES += "pcbios efi"
MACHINE_FEATURES_remove = "alsa"

SYSLINUX_OPTS = "serial 1 115200"
SERIAL_CONSOLE = "115200 ttyS0"
APPEND += "console=ttyS0,115200 console=tty0"

PLATFORM_VENDOR = "accton"
BISDN_ONIE_MACHINE = "as7726-32x"
BISDN_ONIE_PLATFORM = "x86_64-accton-as7726-r0"

ONIE_VENDOR = "accton"
ONIE_MACHINE_TYPE = "as7726-32x"

CONSOLE_SPEED = "115200"
CONSOLE_DEV = "0"
CONSOLE_PORT = "0x3f8"

GLIBC_ADDONS = "nptl"

MACHINE_EXTRA_RDEPENDS += " \
    accton-as7726-32x-cpld-mod \
    accton-as7726-32x-fan-mod \
    accton-as7726-32x-leds-mod \
    accton-as7726-32x-psu-mod \
    optoe-mod \
    ym2651y-mod \
"
MACHINE_EXTRA_RDEPENDS += "platform-${ONIE_MACHINE_TYPE}"

OFDPA_SWITCH_SUPPORT = "BCM56870"
