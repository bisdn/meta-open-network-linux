#@TYPE: Machine
#@NAME: accton-as7726-32x

#@DESCRIPTION: Machine configuration for accton-as7726-32x systems

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto-onl"
PREFERRED_VERSION_linux-yocto-onl ?= "6.1%"

KMACHINE:accton-as7726-32x = "x86_64-intel"
KERNEL_FEATURES += "bsp/x86_64-intel"

DEFAULTTUNE ?= "corei7-64"

require conf/machine/include/x86/tune-corei7.inc
require conf/machine/include/x86/x86-base.inc
require conf/machine/include/onl.inc

MACHINE_FEATURES += "pcbios efi"
MACHINE_FEATURES:remove = "alsa"

ONIE_VENDOR = "accton"
ONIE_MACHINE_TYPE = "as7726_32x"

MACHINE_EXTRA_RDEPENDS += " \
    kernel-module-optoe \
    kernel-module-x86-64-accton-as7726-32x-cpld \
    kernel-module-x86-64-accton-as7726-32x-fan \
    kernel-module-x86-64-accton-as7726-32x-leds \
    kernel-module-x86-64-accton-as7726-32x-psu \
    kernel-module-ym2651y \
    platform-onl-init \
"

OFDPA_SWITCH_SUPPORT = "BCM56870"
