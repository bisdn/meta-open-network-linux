#@TYPE: Machine
#@NAME: agema-ag5648

#@DESCRIPTION: Machine configuration for agema-ag5648 systems

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto-onl"
PREFERRED_VERSION_linux-yocto-onl ?= "6.1%"

KMACHINE:agema-ag5648 = "x86_64-intel"
KERNEL_FEATURES += "bsp/x86_64-intel"

DEFAULTTUNE ?= "corei7-64"

require conf/machine/include/x86/tune-corei7.inc
require conf/machine/include/x86/x86-base.inc
require conf/machine/include/onl.inc

MACHINE_FEATURES += "pcbios efi"
MACHINE_FEATURES:remove = "alsa"

PLATFORM_VENDOR = "agema"
BISDN_ONIE_MACHINE = "ag5648"

ONIE_VENDOR = "delta"
ONIE_MACHINE_TYPE = "ag5648"

ONL_PLATFORM_SUPPORT = " \
    x86_64-delta_ag5648-r0 \
    x86_64-delta_ag5648v1-r0 \
"

# delta-ag5648's i2c-cpld is part of delta's common vendor modules
ONL_MODULE_VENDORS = "delta"

MACHINE_EXTRA_RDEPENDS += " \
    platform-onl-init \
    kernel-module-dni-ag5648-psu \
    kernel-module-dni-ag5648-sfp \
    kernel-module-dni-emc2305 \
    kernel-module-i2c-cpld \
"
