#@TYPE: Machine
#@NAME: accton-as4610-30

#@DESCRIPTION: Machine configuration for accton-as4610-30 systems

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto-onl"
PREFERRED_VERSION_linux-yocto-onl ?= "5.10%"

KMACHINE_accton-as4610 = "armel-iproc"
KERNEL_FEATURES += "bsp/armel-iproc"

DEFAULTTUNE ?= "cortexa9"
require conf/machine/include/qemu.inc
require conf/machine/include/tune-cortexa9.inc
require conf/machine/include/onl.inc

BISDN_SWITCH_IMAGE_EXTRA_INSTALL_remove = "grub"

MACHINE_FEATURES += "pcbios"
MACHINE_FEATURES_remove += "alsa"

SYSLINUX_OPTS = "serial 0 115200"
SERIAL_CONSOLE = "115200 ttyS0"
APPEND += "console=ttyS0,115200 onl_platform=arm-accton-as4610-30-r0"

KERNEL_FEATURES_remove = "features/debug/printk.scc features/kernel-sample/kernel-sample.scc"
KERNEL_CLASSES += "kernel-fitimage"
KERNEL_IMAGETYPE = "fitImage"
UBOOT_ENTRYPOINT="0x61008000"
UBOOT_RD_LOADADDRESS = "0x00000000"
UBOOT_RD_ENTRYPOINT = "0x00000000"
KERNEL_EXTRA_ARGS += "LOADADDR=${UBOOT_ENTRYPOINT}"
KERNEL_DEVICETREE = "arm-accton-as4610.dtb arm-accton-as4610-30t.dtb arm-accton-as4610-30p.dtb arm-accton-as4610-54t.dtb arm-accton-as4610-54p.dtb"
PLATFORM_VENDOR = "accton"
BISDN_ONIE_MACHINE = "as4610"
BISDN_ONIE_PLATFORM = "arm-accton-as4610-30-r0"
BISDN_ARCH = "u-boot-arch"

ONL_ARCH = "armel"
ONL_PLATFORM_SUBDIR = "arm-accton-as4610"
ONIE_VENDOR = "accton"
ONIE_MACHINE_TYPE = "as4610-30"

GLIBC_ADDONS = "nptl"

MACHINE_EXTRA_RDEPENDS += "accton-as4610-cpld-mod accton-as4610-psu-mod accton-as4610-fan-mod accton-as4610-leds-mod ym2651y-mod optoe-mod accton-as4610-poe-mcu-mod"
MACHINE_EXTRA_RDEPENDS += "platform-as4610"
