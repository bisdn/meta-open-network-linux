#@TYPE: Machine
#@NAME: agema-ag7648

#@DESCRIPTION: Machine configuration for agema-ag7648 systems

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto-onl"
PREFERRED_VERSION_linux-yocto-onl ?= "5.15%"

KMACHINE:agema-ag7648 = "x86_64-intel"
KERNEL_FEATURES += "bsp/x86_64-intel"

DEFAULTTUNE ?= "corei7-64"

require conf/machine/include/x86/tune-corei7.inc
require conf/machine/include/x86/x86-base.inc
require conf/machine/include/onl.inc

MACHINE_FEATURES += "pcbios efi"
MACHINE_FEATURES:remove = "alsa"

SYSLINUX_OPTS = "serial 0 115200"
SERIAL_CONSOLE = "115200 ttyS0"
APPEND += "console=ttyS0,115200"

PLATFORM_VENDOR = "agema"
BISDN_ONIE_MACHINE = "ag7648"

ONIE_VENDOR = "delta"
ONIE_MACHINE_TYPE = "ag7648"

GLIBC_ADDONS = "nptl"

MACHINE_EXTRA_RDEPENDS += "kernel-module-x86-64-delta-ag7648-cpld-mux-1"
MACHINE_EXTRA_RDEPENDS += "kernel-module-x86-64-delta-ag7648-cpld-mux-2"
MACHINE_EXTRA_RDEPENDS += "kernel-module-x86-64-delta-ag7648-i2c-mux-setting"
MACHINE_EXTRA_RDEPENDS += "platform-${ONIE_MACHINE_TYPE}"
