#@TYPE: Machine
#@NAME: accton-as4630-54pe

#@DESCRIPTION: Machine configuration for accton-as4630-54pe systems

PREFERRED_PROVIDER_virtual/kernel ?= "linux-yocto-onl"
PREFERRED_VERSION_linux-yocto-onl ?= "5.15%"

KMACHINE:accton-as4630-54pe = "x86_64-intel"
KERNEL_FEATURES += "bsp/x86_64-intel"

DEFAULTTUNE ?= "corei7-64"

require conf/machine/include/x86/tune-corei7.inc
require conf/machine/include/x86/x86-base.inc
require conf/machine/include/onl.inc

MACHINE_FEATURES += "pcbios efi"
MACHINE_FEATURES:remove = "alsa"

PLATFORM_VENDOR = "accton"
BISDN_ONIE_MACHINE = "as4630-54pe"

ONIE_VENDOR = "accton"
ONIE_MACHINE_TYPE = "as4630_54pe"

ONL_PLATFORM_SUPPORT = " \
    x86_64-accton_as4630_54pe-r0 \
    x86_64-accton_as4630_54te-r0 \
"

GLIBC_ADDONS = "nptl"

MACHINE_EXTRA_RDEPENDS += " \
    accton-as4630-54pe-poe-mcu-mod \
    kernel-module-optoe \
    kernel-module-x86-64-accton-as4630-54pe-cpld \
    kernel-module-x86-64-accton-as4630-54pe-leds \
    kernel-module-x86-64-accton-as4630-54pe-psu \
    kernel-module-x86-64-accton-as4630-54te-cpld \
    kernel-module-x86-64-accton-as4630-54te-leds \
    kernel-module-x86-64-accton-as4630-54te-psu \
    kernel-module-ym2651y \
"
MACHINE_EXTRA_RDEPENDS += "platform-as4630-54pe"

OFDPA_SWITCH_SUPPORT = "BCM56370"
